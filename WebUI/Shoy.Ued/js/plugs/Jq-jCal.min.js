/*! tjzx.ued version:0.1.0 2014-05-10 09:49:49 */
!function(a){function b(e,f){a(e).append('<div class="jCal">'+(0==f.ind?'<div class="left" />':"")+'<div class="month"><span class="monthYear">'+f.day.getFullYear()+'</span><span class="monthName">'+f.ml[f.day.getMonth()]+"</span></div>"+(f.ind==f.showMonths-1?'<div class="right" />':"")+"</div>"),f.monthSelect&&a(e).find(".jCal .monthName, .jCal .monthYear").bind("mouseover",a.extend({},f),function(b){a(this).removeClass("monthYearHover").removeClass("monthNameHover"),0==a(".jCalMask",b.data._target).length&&a(this).addClass(a(this).attr("class")+"Hover")}).bind("mouseout",function(){a(this).removeClass("monthYearHover").removeClass("monthNameHover")}).bind("click",a.extend({},f),function(b){a(b.data._target).stop(),a(".jCalMo .monthSelector, .jCalMo .monthSelectorShadow").remove();var c=a(this).hasClass("monthName"),d=Math.max(parseInt(a(this).css("padding-left")),parseInt(a(this).css("padding-left")))||2,e=a(this).position().top-(c?b.data.day.getMonth():2)*(a(this).height()+0);e=e>0?e:0;var g=a(this).position().top-e;a('<div class="monthSelectorShadow" style="top:'+a(b.data._target).position().top+"px; left:"+a(b.data._target).position().left+"px; width:"+(a(b.data._target).width()+(parseInt(a(b.data._target).css("paddingLeft"))||0)+(parseInt(a(b.data._target).css("paddingRight"))||0))+"px; height:"+(a(b.data._target).height()+(parseInt(a(b.data._target).css("paddingTop"))||0)+(parseInt(a(b.data._target).css("paddingBottom"))||0))+'px;"></div>').css("opacity",.01).appendTo(a(this).parent()),a('<div class="monthSelector" style="top:'+e+"px; left:"+a(this).position().left+"px; width:"+(a(this).width()+2*d)+'px;"></div>').css("opacity",0).appendTo(a(this).parent());for(var h=c?0:-2,i=c?12:3;i>h;h++)a(this).clone().removeClass("monthYearHover").removeClass("monthNameHover").addClass("monthSelect").attr("id",c?h+1+"_1_"+b.data.day.getFullYear():b.data.day.getMonth()+1+"_1_"+(b.data.day.getFullYear()+h)).html(c?b.data.ml[h]:b.data.day.getFullYear()+h).css("top",a(this).height()*h).appendTo(a(this).parent().find(".monthSelector"));var j=a(this).parent().find(".monthSelector").get(0),k=a(j).height()-(a(j).height()-g);a(j).css("clip","rect("+k+"px "+(a(this).width()+2*d)+"px "+k+"px 0px)").animate({opacity:.92,clip:"rect(0px "+(a(this).width()+2*d)+"px "+a(j).height()+"px 0px)"},b.data.scrollSpeed,function(){a(this).parent().find(".monthSelectorShadow").bind("mouseover click",function(){a(this).parent().find(".monthSelector").remove(),a(this).remove()})}).parent().find(".monthSelectorShadow").animate({opacity:.1},b.data.scrollSpeed),a(".jCalMo .monthSelect",b.data._target).bind("mouseover mouseout click",a.extend({},b.data),function(b){"click"==b.type?a(b.data._target).jCal(a.extend(b.data,{day:new Date(a(this).attr("id").replace(/_/g,"/"))})):a(this).toggleClass("monthSelectHover")}),"function"==typeof f.drawBack&&f.drawBack()}),a(e).find(".jCal .left").bind("click",a.extend({},f),function(e){if(a(".jCalMask",e.data._target).length>0)return!1;a(e.data._target).stop();var g={w:0,h:0};a(".jCalMo",e.data._target).each(function(){g.w+=a(this).width()+parseInt(a(this).css("padding-left"))+parseInt(a(this).css("padding-right"));var b=a(this).height()+parseInt(a(this).css("padding-top"))+parseInt(a(this).css("padding-bottom"));g.h=b>g.h?b:g.h}),a(e.data._target).prepend('<div class="jCalMo"></div>'),e.data.day=new Date(a("div[id*="+e.data.cID+"d_]:first",e.data._target).attr("id").replace(e.data.cID+"d_","").replace(/_/g,"/")),e.data.day.setDate(1),e.data.day.setMonth(e.data.day.getMonth()-1),b(a(".jCalMo:first",e.data._target),e.data),d(a(".jCalMo:first",e.data._target),e.data),e.data.showMonths>1&&(a(".right",e.data._target).clone(!0).appendTo(a(".jCalMo:eq(1) .jCal",e.data._target)),a(".left:last, .right:last",e.data._target).remove()),a(e.data._target).append('<div class="jCalSpace" style="width:'+g.w+"px; height:"+g.h+'px;"></div>'),a(".jCalMo",e.data._target).wrapAll('<div class="jCalMask" style="clip:rect(0px '+g.w+"px "+g.h+"px 0px); width:"+(g.w+g.w/e.data.showMonths)+"px; height:"+g.h+'px;"><div class="jCalMove"></div></div>'),a(".jCalMove",e.data._target).css("margin-left",g.w/e.data.showMonths*-1+"px").css("opacity",.5).animate({marginLeft:"0px"},e.data.scrollSpeed,function(){a(this).children(".jCalMo:not(:last)").appendTo(a(e.data._target)),a(".jCalSpace, .jCalMask",e.data._target).empty().remove(),a(e.data._target).data("day")&&c(e.data._target,a(e.data._target).data("day"),a(e.data._target).data("days"),e.data),"function"==typeof f.drawBack&&f.drawBack()})}),a(e).find(".jCal .right").bind("click",a.extend({},f),function(e){if(a(".jCalMask",e.data._target).length>0)return!1;a(e.data._target).stop();var g={w:0,h:0};a(".jCalMo",e.data._target).each(function(){g.w+=a(this).width()+parseInt(a(this).css("padding-left"))+parseInt(a(this).css("padding-right"));var b=a(this).height()+parseInt(a(this).css("padding-top"))+parseInt(a(this).css("padding-bottom"));g.h=b>g.h?b:g.h}),a(e.data._target).append('<div class="jCalMo"></div>'),e.data.day=new Date(a("div[id^="+e.data.cID+"d_]:last",e.data._target).attr("id").replace(e.data.cID+"d_","").replace(/_/g,"/")),e.data.day.setDate(1),e.data.day.setMonth(e.data.day.getMonth()+1),b(a(".jCalMo:last",e.data._target),e.data),d(a(".jCalMo:last",e.data._target),e.data),e.data.showMonths>1&&(a(".left",e.data._target).clone(!0).prependTo(a(".jCalMo:eq(1) .jCal",e.data._target)),a(".left:first, .right:first",e.data._target).remove()),a(e.data._target).append('<div class="jCalSpace" style="width:'+g.w+"px; height:"+g.h+'px;"></div>'),a(".jCalMo",e.data._target).wrapAll('<div class="jCalMask" style="clip:rect(0px '+g.w+"px "+g.h+"px 0px); width:"+(g.w+g.w/e.data.showMonths)+"px; height:"+g.h+'px;"><div class="jCalMove"></div></div>'),a(".jCalMove",e.data._target).css("opacity",.5).animate({marginLeft:g.w/e.data.showMonths*-1+"px"},e.data.scrollSpeed,function(){a(this).children(".jCalMo:not(:first)").appendTo(a(e.data._target)),a(".jCalSpace, .jCalMask",e.data._target).empty().remove(),a(e.data._target).data("day")&&c(e.data._target,a(e.data._target).data("day"),a(e.data._target).data("days"),e.data),a(this).children(".jCalMo:not(:first)").removeClass(""),"function"==typeof f.drawBack&&f.drawBack()})})}function c(b,c,d,e){for(var f=(new Date(c.getTime()),new Date(c.getTime())),g=!1,h=0,i=d;i>h;h++){var j=a(b).find("div[id*=d_"+(f.getMonth()+1)+"_"+f.getDate()+"_"+f.getFullYear()+"]");j.length>0&&(j.stop().addClass("selectedDay"),g=!0),f.setDate(f.getDate()+1)}g&&"function"==typeof e.callback&&e.callback(c,d)}function d(b,c){for(var d=0,e=c.dow.length;e>d;d++)a(b).append('<div class="dow">'+c.dow[d]+"</div>");for(var f=new Date(new Date(c.day.getTime()).setDate(1)),g=new Date(new Date(f.getTime()).setDate(0)),h=new Date(new Date(new Date(f.getTime()).setMonth(f.getMonth()+1)).setDate(0)),i={fd:f.getDay(),lld:g.getDate(),ld:h.getDate()},j=i.fd<c.dayOffset?c.dayOffset-7:1,k=h.getDay()<c.dayOffset?7-h.getDay():h.getDay(),l=j,m=i.fd+i.ld+(7-k);m>l;l++)a(b).append(l<=i.fd-c.dayOffset?'<div id="'+c.cID+"d"+l+'" class="pday">'+(i.lld-(i.fd-c.dayOffset-l))+"</div>":l>i.fd-c.dayOffset+i.ld?'<div id="'+c.cID+"d"+l+'" class="aday">'+(l-(i.fd-c.dayOffset+i.ld))+"</div>":'<div id="'+c.cID+"d_"+(f.getMonth()+1)+"_"+(l-(i.fd-c.dayOffset))+"_"+f.getFullYear()+'" class="'+(c.dCheck(new Date(new Date(f.getTime()).setDate(l-(i.fd-c.dayOffset))))||"invday")+'">'+(l-(i.fd-c.dayOffset))+"</div>");a(b).find("div[id^="+c.cID+"d]:first, div[id^="+c.cID+"d]:nth-child(7n+2)").before('<div style="clear:both;height: 0;line-height: 0">'),a(b).find("div[id^="+c.cID+"d_]:not(.invday)").bind("mouseover mouseout click",a.extend({},c),function(b){if(a(".jCalMask",b.data._target).length>0)return!1;var c=new Date(a(this).attr("id").replace(/c[0-9]{1,}d_([0-9]{1,2})_([0-9]{1,2})_([0-9]{4})/,"$1/$2/$3"));b.data.forceWeek&&c.setDate(c.getDate()+(b.data.dayOffset-c.getDay()));var d=new Date(c.getTime());"click"==b.type&&a("div[id*=d_]",b.data._target).stop().removeClass("selectedDay").removeClass("overDay");for(var e=0,f=a(b.data._target).data("days");f>e;e++){var g=a(b.data._target).find("#"+b.data.cID+"d_"+(d.getMonth()+1)+"_"+d.getDate()+"_"+d.getFullYear());if(0==g.length||a(g).hasClass("invday"))break;"mouseover"==b.type?a(g).addClass("overDay"):"mouseout"==b.type?a(g).stop().removeClass("overDay"):"click"==b.type&&a(g).stop().addClass("selectedDay"),d.setDate(d.getDate()+1)}"click"==b.type&&(b.data.day=c,b.data.callback(c,e,this)&&a(b.data._target).data("day",b.data.day).data("days",e))})}a.fn.jCal=function(b){return a.jCal(this,b),this},a.jCal=function(e,f){f=a.extend({day:new Date,days:1,showMonths:1,monthSelect:!1,dCheck:function(){return"day"},callback:function(){return!0},drawBack:function(){return!0},selectedBG:"rgb(0, 143, 214)",defaultBG:"rgb(255, 255, 255)",dayOffset:0,scrollSpeed:150,forceWeek:!1,dow:["日","一","二","三","四","五","六"],ml:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],ms:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],_target:e},f),f.day=new Date(f.day.getFullYear(),f.day.getMonth(),1),a(f._target).data("days")||a(f._target).data("days",f.days),a(e).stop().empty();for(var g=0;g<f.showMonths;g++)a(e).append('<div class="jCalMo"></div>');f.cID="c"+a(".jCalMo").length,a(".jCalMo",e).each(function(c){b(a(this),a.extend({},f,{ind:c,day:new Date(new Date(f.day.getTime()).setMonth(new Date(f.day.getTime()).getMonth()+c))})),d(a(this),a.extend({},f,{ind:c,day:new Date(new Date(f.day.getTime()).setMonth(new Date(f.day.getTime()).getMonth()+c))}))}),a(f._target).data("day")&&a(f._target).data("days")&&c(e,a(f._target).data("day"),a(f._target).data("days"),f),"function"==typeof f.drawBack&&f.drawBack()}}(jQuery);