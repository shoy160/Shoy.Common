/*! singer version:0.1.0 2014-04-12 22:40:43 */
var hTemplate=window.hTemplate=function(a,b){String.prototype.replaceAll||(String.prototype.replaceAll=function(a,b){var c=new RegExp(a,"gi");return this.replace(c,b)}),String.prototype.bind=function(a,b){return isNaN(b)&&(b=b||""),this.replaceAll("\\{"+a+"\\}",b)},String.prototype.fill=function(a){if("object"!=typeof a)return"";var b=this;for(var c in a){var d=a[c];b=b.bind(c,d)}return b=b.bind("[^}]+","")},String.prototype.format=function(){if(arguments.length<=0)return this;var a=this,b=function(a){return Object.prototype.toString.call(a).slice(8,-1).toLowerCase()};if(1===arguments.length&&"object"===b(arguments[0]))for(var c in arguments[0]){var d=new RegExp("\\{\\{"+c+"\\}\\}","gi");a=a.replace(d,arguments[0][c])}else for(var e=0;e<arguments.length;e++){var d=new RegExp("\\{"+e+"\\}","gi");a=a.replace(d,arguments[e])}return d=new RegExp("(\\{[0-9]+\\})|(\\{\\{[0-9a-z]+\\}\\})","gi"),a=a.replace(d,"")};var c={tmp:"",empty:"",container:a(document),pager:a(".h-pager"),page:1,size:20,total:0,filter:b,fill:b,pageClick:b,complete:b},d='<li class="{{class}}"><a data-act="{{act}}" href="#">{{page}}</a></li>',e=function(e){e=a.extend({},c,e),this.opt=e,this.set=function(b){this.opt=a.extend({},this.opt,b)},this.fill=function(a){var b=this.opt;b.filter&&"function"==typeof b.filter&&(a=b.filter(a));var c=b.tmp.fill(a);b.fill&&"function"==typeof b.fill&&(c=b.fill(c,a)),b.container.append(c)},this.pager=function(){var c=this.opt,e=this,f=c.page,g=c.size,h=Math.ceil(c.total/g)||1;0>=f&&(f=1),f>h&&(f=h),0>=h&&(h=1);var i="",j=!b,k=!b,l=function(a){return d.format({"class":a===f?"active":"",page:a})};1==f&&(j=b),f==h&&(k=b);var m;if(1===h)return c.pager.html(""),b;if(h>1&&9>h)for(m=1;h>=m;m++)i+=l(m);else{for(i+=l(1),f-4>1&&(i+=d.format({"class":"disabled",page:"..."})),m=f-3;f+4>m;m++)m>1&&h>m&&(i+=l(m));h>f+4&&(i+=d.format({"class":"disabled",page:"..."})),i+=l(h)}i=d.format({"class":j?"":"disabled",page:"&laquo;",act:j?-1:0})+i,i+=d.format({"class":k?"":"disabled",page:"&raquo;",act:k?1:0}),c.pager.html("<ul>"+i+"</ul>"),c.pager.find("ul li a").bind("click.hPager",function(){var b=a(this),d=b.parent();if(d.hasClass("active")||d.hasClass("disabled"))return!1;var f=~~c.pager.find(".active a").html(),g=~~b.data("act");return g?f+=g:f=~~b.html(),e.set({page:f}),c.pageClick&&"function"==typeof c.pageClick&&c.pageClick(f),e.pager(),!1})},this.bind=function(a,c,d){var e=this.opt.complete;if(!a||a instanceof Array&&!a.length)return d||this.empty(),e&&"function"==typeof e&&e.apply(),b;if(d||this.clear(),"object"==typeof a)if(a instanceof Array)for(var f=0;f<a.length;f++)this.fill(a[f]);else this.fill(a);return this.set({total:c}),this.pager(),e&&"function"==typeof e&&e.apply(),b},this.clear=function(){this.opt.container.html("")},this.empty=function(a){var b=this.opt.empty.fill(a||{msg:"没有找到相关记录！"});this.opt.container.html(b)}};return e}(jQuery,!1);