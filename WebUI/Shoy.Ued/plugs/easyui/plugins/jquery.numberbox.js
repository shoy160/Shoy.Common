/*! tjzx.ued version:0.1.0 2014-05-10 09:49:49 */
!function(a){function b(b){a(b).addClass("numberbox-f");var c=a('<input type="hidden">').insertAfter(b),d=a(b).attr("name");return d&&(c.attr("name",d),a(b).removeAttr("name").attr("numberboxName",d)),c}function c(b){var c=a.data(b,"numberbox").options,f=c.onChange;c.onChange=function(){},e(b,c.parser.call(b,c.value)),c.onChange=f,c.originalValue=d(b)}function d(b){return a.data(b,"numberbox").field.val()}function e(b,c){var e=a.data(b,"numberbox"),f=e.options,g=d(b);c=f.parser.call(b,c),f.value=c,e.field.val(c),a(b).val(f.formatter.call(b,c)),g!=c&&f.onChange.call(b,c,g)}function f(b){var c=a.data(b,"numberbox").options;a(b).unbind(".numberbox").bind("keypress.numberbox",function(a){return c.filter.call(b,a)}).bind("blur.numberbox",function(){e(b,a(this).val()),a(this).val(c.formatter.call(b,d(b)))}).bind("focus.numberbox",function(){var e=d(b);e!=c.parser.call(b,a(this).val())&&a(this).val(c.formatter.call(b,e))})}function g(b){if(a.fn.validatebox){var c=a.data(b,"numberbox").options;a(b).validatebox(c)}}function h(b,c){var d=a.data(b,"numberbox").options;c?(d.disabled=!0,a(b).attr("disabled",!0)):(d.disabled=!1,a(b).removeAttr("disabled"))}a.fn.numberbox=function(d,e){if("string"==typeof d){var i=a.fn.numberbox.methods[d];return i?i(this,e):this.validatebox(d,e)}return d=d||{},this.each(function(){var e=a.data(this,"numberbox");e?a.extend(e.options,d):(e=a.data(this,"numberbox",{options:a.extend({},a.fn.numberbox.defaults,a.fn.numberbox.parseOptions(this),d),field:b(this)}),a(this).removeAttr("disabled"),a(this).css({imeMode:"disabled"})),h(this,e.options.disabled),f(this),g(this),c(this)})},a.fn.numberbox.methods={options:function(b){return a.data(b[0],"numberbox").options},destroy:function(b){return b.each(function(){a.data(this,"numberbox").field.remove(),a(this).validatebox("destroy"),a(this).remove()})},disable:function(a){return a.each(function(){h(this,!0)})},enable:function(a){return a.each(function(){h(this,!1)})},fix:function(b){return b.each(function(){e(this,a(this).val())})},setValue:function(a,b){return a.each(function(){e(this,b)})},getValue:function(a){return d(a[0])},clear:function(b){return b.each(function(){var b=a.data(this,"numberbox");b.field.val(""),a(this).val("")})},reset:function(b){return b.each(function(){var b=a(this).numberbox("options");a(this).numberbox("setValue",b.originalValue)})}},a.fn.numberbox.parseOptions=function(b){var c=a(b);return a.extend({},a.fn.validatebox.parseOptions(b),a.parser.parseOptions(b,["decimalSeparator","groupSeparator","suffix",{min:"number",max:"number",precision:"number"}]),{prefix:c.attr("prefix")?c.attr("prefix"):void 0,disabled:c.attr("disabled")?!0:void 0,value:c.val()||void 0})},a.fn.numberbox.defaults=a.extend({},a.fn.validatebox.defaults,{disabled:!1,value:"",min:null,max:null,precision:0,decimalSeparator:".",groupSeparator:"",prefix:"",suffix:"",filter:function(b){var c=a(this).numberbox("options");if(45==b.which)return-1==a(this).val().indexOf("-")?!0:!1;var d=String.fromCharCode(b.which);return d==c.decimalSeparator?-1==a(this).val().indexOf(d)?!0:!1:d==c.groupSeparator?!0:b.which>=48&&b.which<=57&&0==b.ctrlKey&&0==b.shiftKey||0==b.which||8==b.which?!0:1!=b.ctrlKey||99!=b.which&&118!=b.which?!1:!0},formatter:function(b){if(!b)return b;b+="";var c=a(this).numberbox("options"),d=b,e="",f=b.indexOf(".");if(f>=0&&(d=b.substring(0,f),e=b.substring(f+1,b.length)),c.groupSeparator)for(var g=/(\d+)(\d{3})/;g.test(d);)d=d.replace(g,"$1"+c.groupSeparator+"$2");return e?c.prefix+d+c.decimalSeparator+e+c.suffix:c.prefix+d+c.suffix},parser:function(b){b+="";var c=a(this).numberbox("options");parseFloat(b)!=b&&(c.prefix&&(b=a.trim(b.replace(new RegExp("\\"+a.trim(c.prefix),"g"),""))),c.suffix&&(b=a.trim(b.replace(new RegExp("\\"+a.trim(c.suffix),"g"),""))),c.groupSeparator&&(b=a.trim(b.replace(new RegExp("\\"+c.groupSeparator,"g"),""))),c.decimalSeparator&&(b=a.trim(b.replace(new RegExp("\\"+c.decimalSeparator,"g"),"."))),b=b.replace(/\s/g,""));var d=parseFloat(b).toFixed(c.precision);return isNaN(d)?d="":"number"==typeof c.min&&d<c.min?d=c.min.toFixed(c.precision):"number"==typeof c.max&&d>c.max&&(d=c.max.toFixed(c.precision)),d},onChange:function(){}})}(jQuery);