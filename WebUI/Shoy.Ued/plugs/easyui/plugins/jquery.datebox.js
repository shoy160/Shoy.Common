/*! tjzx.ued version:0.1.0 2014-05-10 09:49:49 */
!function(a){function b(b){function c(){var c=a(b).combo("panel").css("overflow","hidden"),d=a('<div class="datebox-calendar-inner"></div>').appendTo(c);g.sharedCalendar?(f.calendar=a(g.sharedCalendar).appendTo(d),f.calendar.hasClass("calendar")||f.calendar.calendar()):f.calendar=a("<div></div>").appendTo(d).calendar(),a.extend(f.calendar.calendar("options"),{fit:!0,border:!1,onSelect:function(c){var d=a(this.target).datebox("options");e(this.target,d.formatter(c)),a(this.target).combo("hidePanel"),d.onSelect.call(b,c)}}),e(b,g.value);for(var h=a('<div class="datebox-button"><table cellspacing="0" cellpadding="0" style="width:100%"><tr></tr></table></div>').appendTo(c),i=h.find("tr"),j=0;j<g.buttons.length;j++){var k=a("<td></td>").appendTo(i),l=g.buttons[j],m=a('<a href="javascript:void(0)"></a>').html(a.isFunction(l.text)?l.text(b):l.text).appendTo(k);m.bind("click",{target:b,handler:l.handler},function(a){a.data.handler.call(this,a.data.target)})}i.find("td").css("width",100/g.buttons.length+"%")}function d(){var c=a(b).combo("panel"),d=c.children("div.datebox-calendar-inner");if(c.children()._outerWidth(c.width()),f.calendar.appendTo(d),f.calendar[0].target=b,"auto"!=g.panelHeight){var e=c.height();c.children().not(d).each(function(){e-=a(this).outerHeight()}),d._outerHeight(e)}f.calendar.calendar("resize")}var f=a.data(b,"datebox"),g=f.options;a(b).addClass("datebox-f").combo(a.extend({},g,{onShowPanel:function(){d(),e(b,a(b).datebox("getText")),g.onShowPanel.call(b)}})),a(b).combo("textbox").parent().addClass("datebox"),f.calendar||c()}function c(a,b){e(a,b)}function d(b){var c=a.data(b,"datebox"),d=c.options,f=d.formatter(c.calendar.calendar("options").current);e(b,f),a(b).combo("hidePanel")}function e(b,c){var d=a.data(b,"datebox"),e=d.options;a(b).combo("setValue",c).combo("setText",c),d.calendar.calendar("moveTo",e.parser(c))}a.fn.datebox=function(c,d){if("string"==typeof c){var e=a.fn.datebox.methods[c];return e?e(this,d):this.combo(c,d)}return c=c||{},this.each(function(){var d=a.data(this,"datebox");d?a.extend(d.options,c):a.data(this,"datebox",{options:a.extend({},a.fn.datebox.defaults,a.fn.datebox.parseOptions(this),c)}),b(this)})},a.fn.datebox.methods={options:function(b){var c=b.combo("options");return a.extend(a.data(b[0],"datebox").options,{originalValue:c.originalValue,disabled:c.disabled,readonly:c.readonly})},calendar:function(b){return a.data(b[0],"datebox").calendar},setValue:function(a,b){return a.each(function(){e(this,b)})},reset:function(b){return b.each(function(){var b=a(this).datebox("options");a(this).datebox("setValue",b.originalValue)})}},a.fn.datebox.parseOptions=function(b){return a.extend({},a.fn.combo.parseOptions(b),a.parser.parseOptions(b,["sharedCalendar"]))},a.fn.datebox.defaults=a.extend({},a.fn.combo.defaults,{panelWidth:180,panelHeight:"auto",sharedCalendar:null,keyHandler:{up:function(){},down:function(){},left:function(){},right:function(){},enter:function(){d(this)},query:function(a){c(this,a)}},currentText:"Today",closeText:"Close",okText:"Ok",buttons:[{text:function(b){return a(b).datebox("options").currentText},handler:function(b){a(b).datebox("calendar").calendar({year:(new Date).getFullYear(),month:(new Date).getMonth()+1,current:new Date}),d(b)}},{text:function(b){return a(b).datebox("options").closeText},handler:function(){a(this).closest("div.combo-panel").panel("close")}}],formatter:function(a){var b=a.getFullYear(),c=a.getMonth()+1,d=a.getDate();return c+"/"+d+"/"+b},parser:function(a){var b=Date.parse(a);return isNaN(b)?new Date:new Date(b)},onSelect:function(){}})}(jQuery);