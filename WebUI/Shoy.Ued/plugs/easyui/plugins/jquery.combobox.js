/*! tjzx.ued version:0.1.0 2014-05-10 09:49:49 */
!function(a){function b(b,c,d,e){function f(a,b,c){for(var d=0;d<a.length;d++){var e=a[d];if(e[b]==c)return e}return null}{var g=a.data(b,"combobox");g.options}return e?f(g.groups,d,c):f(g.data,d?d:g.options.valueField,c)}function c(c,d){var e=a(c).combo("panel"),f=b(c,d);if(f){var g=a("#"+f.domId);if(g.position().top<=0){var h=e.scrollTop()+g.position().top;e.scrollTop(h)}else if(g.position().top+g.outerHeight()>e.height()){var h=e.scrollTop()+g.position().top+g.outerHeight()-e.height();e.scrollTop(h)}}}function d(d,f){var g=a.data(d,"combobox").options,h=a(d).combobox("panel"),i=h.children("div.combobox-item-hover");i.length||(i=h.children("div.combobox-item-selected")),i.removeClass("combobox-item-hover");var j="div.combobox-item:visible:not(.combobox-item-disabled):first",k="div.combobox-item:visible:not(.combobox-item-disabled):last";if(i.length?"next"==f?(i=i.nextAll(j),i.length||(i=h.children(j))):(i=i.prevAll(j),i.length||(i=h.children(k))):i=h.children("next"==f?j:k),i.length){i.addClass("combobox-item-hover");var l=b(d,i.attr("id"),"domId");l&&(c(d,l[g.valueField]),g.selectOnNavigation&&e(d,l[g.valueField]))}}function e(c,d){var e=a.data(c,"combobox").options,f=a(c).combo("getValues");-1==a.inArray(d+"",f)&&(e.multiple?f.push(d):f=[d],g(c,f),e.onSelect.call(c,b(c,d)))}function f(c,d){var e=a.data(c,"combobox").options,f=a(c).combo("getValues"),h=a.inArray(d+"",f);h>=0&&(f.splice(h,1),g(c,f),e.onUnselect.call(c,b(c,d)))}function g(c,d,e){var f=a.data(c,"combobox").options,g=a(c).combo("panel");g.find("div.combobox-item-selected").removeClass("combobox-item-selected");for(var h=[],i=[],j=0;j<d.length;j++){var k=d[j],l=k,m=b(c,k);m&&(l=m[f.textField],a("#"+m.domId).addClass("combobox-item-selected")),h.push(k),i.push(l)}a(c).combo("setValues",h),e||a(c).combo("setText",i.join(f.separator))}function h(b,c,d){var e=a.data(b,"combobox"),f=e.options;e.data=f.loadFilter.call(b,c),e.groups=[],c=e.data;for(var h=a(b).combobox("getValues"),i=[],j=void 0,k=0;k<c.length;k++){var l=c[k],n=l[f.valueField]+"",o=l[f.textField],p=l[f.groupField];if(p){if(j!=p){j=p;var q={value:p,domId:"_easyui_combobox_"+m++};e.groups.push(q),i.push('<div id="'+q.domId+'" class="combobox-group">'),i.push(f.groupFormatter?f.groupFormatter.call(b,p):p),i.push("</div>")}}else j=void 0;var r="combobox-item"+(l.disabled?" combobox-item-disabled":"")+(p?" combobox-gitem":"");l.domId="_easyui_combobox_"+m++,i.push('<div id="'+l.domId+'" class="'+r+'">'),i.push(f.formatter?f.formatter.call(b,l):o),i.push("</div>"),l.selected&&-1==a.inArray(n,h)&&h.push(n)}a(b).combo("panel").html(i.join("")),f.multiple?g(b,h,d):g(b,h.length?[h[h.length-1]]:[],d),f.onLoadSuccess.call(b,c)}function i(b,c,d,e){var f=a.data(b,"combobox").options;c&&(f.url=c),d=d||{},0!=f.onBeforeLoad.call(b,d)&&f.loader.call(b,d,function(a){h(b,a,e)},function(){f.onLoadError.apply(this,arguments)})}function j(c,d){var e=a.data(c,"combobox"),f=e.options;if(f.multiple&&!d?g(c,[],!0):g(c,[d],!0),"remote"==f.mode)i(c,null,{q:d},!0);else{var h=a(c).combo("panel");h.find("div.combobox-item,div.combobox-group").hide();for(var j=e.data,k=void 0,l=0;l<j.length;l++){var m=j[l];if(f.filter.call(c,d,m)){var n=m[f.valueField],o=m[f.textField],p=m[f.groupField],q=a("#"+m.domId).show();if(o.toLowerCase()==d.toLowerCase()&&(g(c,[n]),q.addClass("combobox-item-selected")),f.groupField&&k!=p){var r=b(c,p,"value",!0);r&&a("#"+r.domId).show(),k=p}}}}}function k(c){var d=a(c),e=d.combobox("options"),f=d.combobox("panel"),g=f.children("div.combobox-item-hover");if(g.length||(g=f.children("div.combobox-item-selected")),g.length){var h=b(c,g.attr("id"),"domId");if(h){var i=h[e.valueField];e.multiple?g.hasClass("combobox-item-selected")?d.combobox("unselect",i):d.combobox("select",i):(d.combobox("select",i),d.combobox("hidePanel"));for(var j=[],k=d.combobox("getValues"),l=0;l<k.length;l++)b(c,k[l])&&j.push(k[l]);d.combobox("setValues",j)}}}function l(d){var g=a.data(d,"combobox").options;a(d).addClass("combobox-f"),a(d).combo(a.extend({},g,{onShowPanel:function(){a(d).combo("panel").find("div.combobox-item,div.combobox-group").show(),c(d,a(d).combobox("getValue")),g.onShowPanel.call(d)}})),a(d).combo("panel").unbind().bind("mouseover",function(b){a(this).children("div.combobox-item-hover").removeClass("combobox-item-hover");var c=a(b.target).closest("div.combobox-item");c.hasClass("combobox-item-disabled")||c.addClass("combobox-item-hover"),b.stopPropagation()}).bind("mouseout",function(b){a(b.target).closest("div.combobox-item").removeClass("combobox-item-hover"),b.stopPropagation()}).bind("click",function(c){var h=a(c.target).closest("div.combobox-item");if(h.length&&!h.hasClass("combobox-item-disabled")){var i=b(d,h.attr("id"),"domId");if(i){var j=i[g.valueField];g.multiple?h.hasClass("combobox-item-selected")?f(d,j):e(d,j):(e(d,j),a(d).combo("hidePanel")),c.stopPropagation()}}})}var m=1;a.fn.combobox=function(b,c){if("string"==typeof b){var d=a.fn.combobox.methods[b];return d?d(this,c):this.combo(b,c)}return b=b||{},this.each(function(){var c=a.data(this,"combobox");if(c)a.extend(c.options,b),l(this);else{c=a.data(this,"combobox",{options:a.extend({},a.fn.combobox.defaults,a.fn.combobox.parseOptions(this),b),data:[]}),l(this);var d=a.fn.combobox.parseData(this);d.length&&h(this,d)}c.options.data&&h(this,c.options.data),i(this)})},a.fn.combobox.methods={options:function(b){var c=b.combo("options");return a.extend(a.data(b[0],"combobox").options,{originalValue:c.originalValue,disabled:c.disabled,readonly:c.readonly})},getData:function(b){return a.data(b[0],"combobox").data},setValues:function(a,b){return a.each(function(){g(this,b)})},setValue:function(a,b){return a.each(function(){g(this,[b])})},clear:function(b){return b.each(function(){a(this).combo("clear");var b=a(this).combo("panel");b.find("div.combobox-item-selected").removeClass("combobox-item-selected")})},reset:function(b){return b.each(function(){var b=a(this).combobox("options");b.multiple?a(this).combobox("setValues",b.originalValue):a(this).combobox("setValue",b.originalValue)})},loadData:function(a,b){return a.each(function(){h(this,b)})},reload:function(a,b){return a.each(function(){i(this,b)})},select:function(a,b){return a.each(function(){e(this,b)})},unselect:function(a,b){return a.each(function(){f(this,b)})}},a.fn.combobox.parseOptions=function(b){a(b);return a.extend({},a.fn.combo.parseOptions(b),a.parser.parseOptions(b,["valueField","textField","groupField","mode","method","url"]))},a.fn.combobox.parseData=function(b){function c(b,c){var f=a(b),g={};g[e.valueField]=void 0!=f.attr("value")?f.attr("value"):f.html(),g[e.textField]=f.html(),g.selected=f.is(":selected"),g.disabled=f.is(":disabled"),c&&(e.groupField=e.groupField||"group",g[e.groupField]=c),d.push(g)}var d=[],e=a(b).combobox("options");return a(b).children().each(function(){if("optgroup"==this.tagName.toLowerCase()){var b=a(this).attr("label");a(this).children().each(function(){c(this,b)})}else c(this)}),d},a.fn.combobox.defaults=a.extend({},a.fn.combo.defaults,{valueField:"value",textField:"text",groupField:null,groupFormatter:function(a){return a},mode:"local",method:"post",url:null,data:null,keyHandler:{up:function(a){d(this,"prev"),a.preventDefault()},down:function(a){d(this,"next"),a.preventDefault()},left:function(){},right:function(){},enter:function(){k(this)},query:function(a){j(this,a)}},filter:function(b,c){var d=a(this).combobox("options");return 0==c[d.textField].toLowerCase().indexOf(b.toLowerCase())},formatter:function(b){var c=a(this).combobox("options");return b[c.textField]},loader:function(b,c,d){var e=a(this).combobox("options");return e.url?void a.ajax({type:e.method,url:e.url,data:b,dataType:"json",success:function(a){c(a)},error:function(){d.apply(this,arguments)}}):!1},loadFilter:function(a){return a},onBeforeLoad:function(){},onLoadSuccess:function(){},onLoadError:function(){},onSelect:function(){},onUnselect:function(){}})}(jQuery);